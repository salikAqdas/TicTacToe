<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe</title>
</head>
<style>
    *{
        padding: 0;
        margin:0;
    }
    .gameBoard{
        width: 30vw;
        height: 30vw;
        margin:20px auto;
        /* border: 1px solid #000; */
    }
    .gameRow{
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
    }
    .board-column{
        border: 1px solid #000;
        width:10vw;
        height: 10vw;
        /* width: 33%; */
        display:flex;
        justify-content: center;
        align-items: center;
    }
    .board-column img{
        width: 80%;
        height: 80%;
    }
    .won{
        background-color: #91ff91;
    }
    #verdict{
        text-align: center;
        background-color: #91ff91;
        color:#000;
        padding:5px;
        border-radius:2px;
    }
</style>

<body>
    <div class="gameBoard">
        <div class="gameRow first-row">
            <div class="board-column first-column" id="00"></div>
            <div class="board-column second-column" id = "01"></div>
            <div class="board-column third-column" id = "02"></div>
        </div>
        <div class="gameRow second-row">
            <div class="board-column first-column" id = "10"></div>
            <div class="board-column second-column" id = "11"></div>
            <div class="board-column third-column" id = "12"></div>
        </div>
        <div class="gameRow third-row">
            <div class="board-column first-column" id = "20"></div>
            <div class="board-column second-column" id = "21"></div>
            <div class="board-column third-column" id = "22"></div>
        </div>

        <div id="verdict">

        </div>
    </div>

</body>
<script>
    let gameCompleted = false;
    let playerOne  = "X";
    let PlayerTwo = "0";
    let isPlayerOne = true;

    let board = [
        ["", "", ""],
        ["", "", ""],
        ["", "", ""]
    ];
    document.querySelectorAll('.board-column').forEach((col)=>{
        col.addEventListener('click',(e)=>{
            if(gameCompleted){
                alert("Refresh to play again!");
                return;
            }
             let elementId = e.target.id;
             updateColumn(elementId.charAt(0),elementId.charAt(1))
             
        })
    })

    function updateColumn(row , col) {
        if(board[row][col] === ''){
            if(isPlayerOne){
                board[row][col] = playerOne;
            }
            else{
                board[row][col] = PlayerTwo;
            }
            isPlayerOne = !isPlayerOne;
            printBoard(row,col);
            decideWinner();
        }
    }
    function printBoard(row,col) {
        let column = document.getElementById(`${row}${col}`);
        let symbol = board[row][col];
        let img = document.createElement('img');
        if(symbol === playerOne){
            img.src = './TicTacToe_Cross.png';
        }
        else{
            img.src = './TicTacToe_Circle.png';
        }
        column.appendChild(img);
    }
    function decideWinner(){
        if(board[0][0] === board[0][1] && board[0][1] === board[0][2] && board[0][0] != ""){
            winner(board[0][0]);
            colorBg("00","01","02");
        }
        if(board[1][0] === board[1][1] && board[1][1] === board[1][2] && board[1][0] != ""){
            winner(board[1][0]);
            colorBg("10","11","12");
        }
        if(board[2][0] === board[2][1] && board[2][1] === board[2][2] && board[2][0] != ""){
            winner(board[2][0]);  
            colorBg("20","21","22");
        }
        if(board[0][0] === board[1][0] && board[1][0] === board[2][0] && board[1][0] != ""){
            winner(board[0][0]);  
            colorBg("00","10","20");
        }
        if(board[0][1] === board[1][1] && board[1][1] === board[2][1] && board[1][1] != ""){
            winner(board[0][1]);
            colorBg("01","11","21");
        }
        if(board[0][2] === board[1][2] && board[1][2] === board[2][2] && board[1][2] != ""){
            winner(board[0][2]);   
            colorBg("02","12","22");
        }
        if(board[0][0] === board[1][1] && board[1][1] === board[2][2] && board[1][1] != ""){
            winner(board[0][0]);  
            colorBg("00","11","22");
        }
        if(board[0][2] === board[1][1] && board[1][1] === board[2][0] && board[1][1] != ""){
            winner(board[0][2]);
            colorBg("02","11","21");
        }
    }
    function colorBg(...boxes){
        boxes.forEach((box)=>{
            // document.getElementById(box).style.classList.add("won");
            document.getElementById(box).classList.add("won");
        })
    }
    function winner(winnerSymbol) {
        let str = "";
        if(winnerSymbol === playerOne){
            str = "Player One Won"
        }
        else{
            str = "Player Two Won"
        }
        document.querySelector('#verdict').innerHTML = str;
        gameCompleted = true;
    }
</script>

</html>